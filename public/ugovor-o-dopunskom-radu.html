<!DOCTYPE html>
<html lang="sr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ugovor o dopunskom radu</title>
    <style>
      body {
        font-family: "Times New Roman", serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        background-color: #f9f9f9;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: white;
        padding: 40px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      h1,
      h2 {
        text-align: center;
        color: #333;
      }
      h1 {
        font-size: 24px;
        margin-bottom: 30px;
        text-transform: uppercase;
      }
      h2 {
        font-size: 18px;
        margin: 20px 0;
      }
      .article {
        margin: 20px 0;
      }
      .article-title {
        font-weight: bold;
        text-align: center;
        margin: 15px 0 10px 0;
      }
      .signature-section {
        display: flex;
        justify-content: space-between;
        margin-top: 50px;
        padding-top: 20px;
        gap: 50px;
      }
      .signature {
        text-align: center;
        flex: 1;
        max-width: 250px;
      }
      .signature-line {
        border-bottom: 2px solid #000;
        margin-bottom: 10px;
        height: 50px;
        width: 100%;
      }
      .print-button {
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
      }
      @media print {
        .print-button {
          display: none;
        }
        body {
          background-color: white;
        }
        .container {
          box-shadow: none;
          padding: 20px;
        }
      }
      .placeholder {
        background-color: #f0f8ff;
        padding: 2px 4px;
        border-radius: 3px;
        font-weight: bold;
      }
      ul {
        margin: 10px 0;
        padding-left: 30px;
      }
      li {
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <button class="print-button" onclick="window.print()">
      üñ®Ô∏è ≈†tampaj ugovor
    </button>

    <div class="container">
      <p style="text-align: center; margin-bottom: 20px">
        Na osnovu ƒçl. 202 Zakona o radu (Sl.list CG 74/2019), dana
        <span id="datum-ugovora">01.07.2024</span> g. zakljuƒçuje se sledeƒái
      </p>

      <h1>UGOVOR O DOPUNSKOM RADU</h1>

      <h2>izmeƒëu:</h2>

      <div class="article">
        <p>
          <strong>1. POSLODAVAC:</strong> "<span id="firma-naziv"
            >DESETKA GROUP</span
          >" D.O.O. BAR, koga zastupa
          <span id="direktor-ime">Hasoviƒá Nazif</span>, izv. dir.
        </p>
        <p>
          <strong>2. ANGA≈ΩOVANO LICE:</strong>
          <span id="radnik-ime-prezime">HASOVIƒÜ AVDIJA</span> iz
          <span id="radnik-adresa">Bara</span> JMBG
          <span id="radnik-jmbg">1234567890123</span>
        </p>
      </div>

      <div class="article">
        <p>
          Ovim ugovorom se ureƒëuju odnosi izmeƒëu poslodavca i anga≈æovanog lica
          na dopunskom radu i utvrƒëuju meƒëusobna prava, obaveze i odgovornosti u
          skladu sa odredbama Zakona o radu i drugih pozitivnih zakonskih
          propisa.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>1.</strong> Anga≈æovano lice zasniva dopunski rad na radnom
          mestu <span id="pozicija-naziv">konobar</span>, u prostorijama
          poslodavca
        </p>
        <p style="margin-left: 20px">
          - <span id="mesto-rada">grill "Desetka" u Baru</span>
        </p>

        <p>
          U obavljanju poslova iz prethodnog stava anga≈æovano lice vr≈°i poslove:
        </p>
        <ul id="opis-poslova">
          <li>Vr≈°i poslu≈æivanje jela i piƒáa gostima</li>
          <li>Vr≈°i naplatu potro≈°enih roba i usluga</li>
          <li>Odr≈æava ƒçistoƒáu radnog mesta i prostorija za rad</li>
          <li>Predaje dnevni pazar neposrednom rukovodiocu</li>
          <li>
            Obavlja i druge poslove vezane za neposredno obavljanje poslova
            radnog mesta i po nalogu neposrednog rukovodioca
          </li>
        </ul>
      </div>

      <div class="article">
        <p>
          <strong>2.</strong> Anga≈æovano lice zasniva dopunski rad na period od
          <span id="datum-pocetka">01.07.2024</span> do
          <span id="datum-kraja">30.09.2024</span> g.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>3.</strong> Anga≈æovano lice stupa na rad
          <span id="datum-stupanja">01.07.2024</span> g.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>4.</strong> Anga≈æovano lice ƒáe obavljati poslove iz taƒç.1 sa
          radnim vremenom od <span id="sati-dnevno">4</span> sata dnevno odn.
          <span id="sati-nedeljno">20</span> sati nedeljno.
        </p>
        <p>
          Radno vreme iz prethodnog stava anga≈æovanih lica ƒáe se utvrƒëivati u
          skladu sa potrebama procesa rada, odnosno u skladu sa radnim
          rasporedom utvrƒëenim od strane poslodavca.
        </p>
        <p>
          Anga≈æovano lice ƒáe obavljati poslove dopunskog rada van svog redovnog
          radnog vremena u preduzeƒáu gde je u radnom odnosu sa punim radnim
          vremenom.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>5.</strong> Poslodavac se obavezuje da podnese potrebne
          prijave nadle≈ænim organima za anga≈æovano lice po osnovu ovoga ugovora,
          te blagovremeno uplaƒáuje obaveze utvrƒëene zakonom.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>6.</strong> Anga≈æovanom licu pripada zarada u meseƒçnom neto
          iznosu od <span id="visina-zarade">300,00</span> Eura. Zarada se
          isplaƒáuje meseƒçno u skladu sa zakonskim rokovima.
        </p>
        <p>
          Zarada iz prethodnog stava je srazmerna obavljenom poslu tj.
          provedenom vremenu na poslu dopunskog rada.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>7.</strong> Anga≈æovano lice ima pravo na dodatke, naknade i
          druga primanja u skladu sa zakonom i kolektivnim ugovorom, u iznosima
          koji su srazmerni vremenu provedenom na radu.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>8.</strong> Poslodavac je du≈æan da u rokovima utvrƒëenim
          zakonom vr≈°i isplatu zarada i naknada zarada iz ƒçl. 6 i 7 ovog
          ugovora.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>9.</strong> Poslodavac je du≈æan da anga≈æovanom licu obezbedi
          sredstva i mere za≈°tite na radu u skladu sa odredbama Zakona o za≈°titi
          i zdravlju na radu (Sl. list CG 34/14) Akta o za≈°titi na radu
          poslodavca. Zaposleni je du≈æan da se prilikom zakljuƒçenja ovog ugovora
          o radu upozna sa merama i sredstvima za≈°tite na radu, te da se u radu
          strogo pridr≈æava propisanih mera.
        </p>
        <p>
          Prava, obaveze i odgovornosti koje se odnose na za≈°titu i zdravlje na
          radu ureƒëuju se aneksom ugovora odn. posebnim aktom poslodavca.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>10.</strong> Anga≈æovano lice je du≈æno da poslove radnog mesta
          obavlja savesno i odgovorno u skladu sa aktima poslodavca, zahtevima
          radnog mesta i nalozima rukovodioca procesa rada.
        </p>
        <p>
          Anga≈æovano lice je obavezno da po≈°tuje radnu disciplinu, interno
          uputstvo poslodavca, te da ƒçuva poslovnu tajnu i da materijalno
          odgovara za ≈°tetu koju napravi namerno ili iz krajnje nepa≈ænje.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>11.</strong> Poslodavac i anga≈æovano lice prihvataju sva
          prava, obaveze i odgovornosti utvrƒëene zakonom i kolektivnim ugovorom.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>12.</strong> Ovaj ugovor prestaje istekom roka iz taƒçke 2
          ugovora, ili jednostranim otkazom jedne od ugovornih strana.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>13.</strong> U sluƒçaju otkaza ovog ugovora utvrƒëuje se otkazni
          rok od 7 dana. Otkaz se mo≈æe dati u pismenoj formi, uz navoƒëenje
          razloga za otkaz.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>14.</strong> Sporove iz ovog ugovora re≈°ava nadle≈æni sud u
          skladu sa zakonom.
        </p>
      </div>

      <div class="article">
        <p>
          <strong>15.</strong> Ovaj ugovor o dopunskom radu se smatra
          zakljuƒçenim kada ga potpi≈°u poslodavac i anga≈æovano lice.
        </p>
      </div>

      <div class="signature-section">
        <div class="signature">
          <div class="signature-line"></div>
          <p><strong>POSLODAVAC</strong></p>
        </div>
        <div class="signature">
          <div class="signature-line"></div>
          <p><strong>ANGA≈ΩOVANO LICE</strong></p>
        </div>
      </div>
    </div>

    <script>
      async function popuniUgovor(ugovorId) {
        try {
          const response = await fetch(`/api/contracts/${ugovorId}`);
          const ugovor = await response.json();

          popuniUgovorSaPodacima(ugovor);
        } catch (error) {
          console.error("Gre≈°ka pri dohvaƒáanju ugovora:", error);
        }
      }

      async function popuniUgovorPoRadniku(radnikId, firmaId) {
        try {
          const [radnikResponse, firmaResponse] = await Promise.all([
            fetch(`/api/radnici/id/${radnikId}`),
            fetch(`/api/firme/id/${firmaId}`),
          ]);

          const radnik = await radnikResponse.json();
          const firma = await firmaResponse.json();

          const ugovor = {
            firma_naziv: firma.naziv,
            firma_pib: firma.pib,
            firma_adresa: firma.adresa,
            direktor_ime_prezime: firma.direktor_ime_prezime,
            radnik_ime: radnik.ime,
            radnik_prezime: radnik.prezime,
            radnik_jmbg: radnik.jmbg,
            radnik_grad: radnik.grad,
            radnik_adresa: radnik.adresa,
            pozicija_naziv: radnik.pozicija_naziv,
            opis_poslova: radnik.opis_poslova,
            datum_zaposlenja: radnik.datum_zaposlenja,
            datum_prestanka: radnik.datum_prestanka,
            visina_zarade: radnik.visina_zarade,
            tip_radnog_vremena: radnik.tip_radnog_vremena,
          };

          popuniUgovorSaPodacima(ugovor);
        } catch (error) {
          console.error("Gre≈°ka pri dohvaƒáanju podataka za ugovor:", error);
        }
      }

      // Funkcija za transformaciju grada u genitiv (iz + grad)
      function transformisiGradUPadez(grad) {
        if (!grad) return "Bara"; // Default vrednost

        // Ukloni razmake i pretvori u lowercase za poreƒëenje
        const gradLower = grad.trim().toLowerCase();

        // Mapa najƒçe≈°ƒáih gradova sa njihovim pade≈ænim oblicima
        const gradoviPadezi = {
          bar: "Bara",
          budva: "Budve",
          podgorica: "Podgorice",
          nik≈°iƒá: "Nik≈°iƒáa",
          niksic: "Nik≈°iƒáa",
          "herceg novi": "Herceg Novog",
          cetinje: "Cetinja",
          ulcinj: "Ulcinja",
          kotor: "Kotora",
          tivat: "Tivta",
          pljevlja: "Pljevalja",
          "bijelo polje": "Bijelog Polja",
          berane: "Berana",
          andrijevica: "Andrijevice",
          danilovgrad: "Danilovgrada",
          kola≈°in: "Kola≈°ina",
          kolasin: "Kola≈°ina",
          mojkovac: "Mojkovca",
          plav: "Plava",
          ro≈æaje: "Ro≈æaja",
          rozaje: "Ro≈æaja",
          ≈°avnik: "≈†avnika",
          savnik: "≈†avnika",
          ≈æabljak: "≈Ωabljaka",
          zabljak: "≈Ωabljaka",
          petnjica: "Petnjice",
          gusinje: "Gusinja",
          tuzi: "Tuzija",
        };

        // Provjeri da li grad postoji u mapi
        if (gradoviPadezi[gradLower]) {
          return gradoviPadezi[gradLower];
        }

        // Osnovna pravila za nepoznate gradove
        const gradOriginal = grad.trim();

        // Gradovi koji se zavr≈°avaju na -a (≈æenski rod)
        if (gradOriginal.endsWith("a")) {
          return gradOriginal.slice(0, -1) + "e";
        }

        // Gradovi koji se zavr≈°avaju na -o (srednji rod)
        if (gradOriginal.endsWith("o")) {
          return gradOriginal.slice(0, -1) + "a";
        }

        // Gradovi koji se zavr≈°avaju na suglasnik (mu≈°ki rod)
        // Dodaj -a na kraj
        return gradOriginal + "a";
      }

      function popuniUgovorSaPodacima(ugovor) {
        // Popuni podatke o firmi
        document.getElementById("firma-naziv").textContent = ugovor.firma_naziv;
        document.getElementById("direktor-ime").textContent =
          ugovor.direktor_ime_prezime || "Direktor";

        // Popuni podatke o radniku
        const radnikImePrezime = `${ugovor.radnik_prezime} ${ugovor.radnik_ime}`;
        document.getElementById("radnik-ime-prezime").textContent =
          radnikImePrezime.toUpperCase();
        document.getElementById("radnik-jmbg").textContent = ugovor.radnik_jmbg;

        // Transformi≈°i grad u odgovarajuƒái pade≈æ
        const gradUPade≈æu = transformisiGradUPadez(ugovor.radnik_grad);
        document.getElementById("radnik-adresa").textContent = gradUPade≈æu;

        // Popuni poziciju
        document.getElementById("pozicija-naziv").textContent =
          ugovor.pozicija_naziv || "radnik";

        // Popuni mesto rada - kombinuj firmu i adresu sa ispravnim pade≈æom
        const firmaMestoUPade≈æu = transformisiGradUPadez(
          ugovor.firma_adresa || "Bar"
        );
        const mestoRada = `${ugovor.firma_naziv} u ${firmaMestoUPade≈æu}`;
        document.getElementById("mesto-rada").textContent = mestoRada;

        // Popuni datume
        if (ugovor.datum_zaposlenja) {
          const datumZaposlenja = new Date(ugovor.datum_zaposlenja);
          const formatiraniDatum = datumZaposlenja.toLocaleDateString("sr-RS");

          document.getElementById("datum-ugovora").textContent =
            formatiraniDatum;
          document.getElementById("datum-pocetka").textContent =
            formatiraniDatum;
          document.getElementById("datum-stupanja").textContent =
            formatiraniDatum;
        }

        if (ugovor.datum_prestanka) {
          const datumPrestanka = new Date(ugovor.datum_prestanka);
          const formatiraniDatumPrestanka =
            datumPrestanka.toLocaleDateString("sr-RS");
          document.getElementById("datum-kraja").textContent =
            formatiraniDatumPrestanka;
        }

        // Popuni zaradu
        document.getElementById("visina-zarade").textContent = `${
          ugovor.visina_zarade || "300,00"
        }`;

        // Popuni radno vreme na osnovu tip_radnog_vremena
        let satiDnevno = 4;
        let satiNedeljno = 20;

        if (ugovor.tip_radnog_vremena) {
          switch (ugovor.tip_radnog_vremena) {
            case "skraceno_2h":
              satiDnevno = 2;
              satiNedeljno = 10;
              break;
            case "skraceno_4h":
              satiDnevno = 4;
              satiNedeljno = 20;
              break;
            case "skraceno_6h":
              satiDnevno = 6;
              satiNedeljno = 30;
              break;
            default:
              satiDnevno = 4;
              satiNedeljno = 20;
          }
        }

        document.getElementById("sati-dnevno").textContent = satiDnevno;
        document.getElementById("sati-nedeljno").textContent = satiNedeljno;

        // Popuni opis poslova ako postoji u bazi
        if (ugovor.opis_poslova) {
          const opisDiv = document.getElementById("opis-poslova");
          opisDiv.innerHTML = `<li>${ugovor.opis_poslova}</li>`;
        }

        console.log("Ugovor o dopunskom radu uspe≈°no popunjen:", ugovor);
      }

      // Kada se stranica uƒçita, popuni ugovor
      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const ugovorId = urlParams.get("ugovor");
        const radnikId = urlParams.get("radnikId");
        const firmaId = urlParams.get("firmaId");

        if (ugovorId) {
          popuniUgovor(ugovorId);
        } else if (radnikId && firmaId) {
          popuniUgovorPoRadniku(radnikId, firmaId);
        } else {
          popuniUgovor(1);
        }
      });
    </script>
  </body>
</html>
