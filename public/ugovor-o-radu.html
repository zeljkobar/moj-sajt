<!DOCTYPE html>
<html lang="sr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Ugovor o radu - Summa Summarum" />
    <meta name="author" content="Summa Summarum" />

    <!-- Favicon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="images/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="images/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="images/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="site.webmanifest" />

    <!-- Theme Preloader - spreÄava bljeskanje dark/light mode -->
    <script src="components/theme-preloader.js"></script>

    <!-- Export Utils - modularni PDF/Word export -->
    <script src="components/export-utils.js"></script>

    <title>Ugovor o radu</title>
    <link rel="stylesheet" href="global-components.css" />
    <!-- PDF Export biblioteka -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
      body {
        font-family: 'Times New Roman', serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        background-color: #f9f9f9;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: white;
        padding: 40px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      h1,
      h2 {
        text-align: center;
        color: #333;
      }
      h1 {
        font-size: 24px;
        margin-bottom: 30px;
        text-transform: uppercase;
      }
      h2 {
        font-size: 18px;
        margin: 20px 0;
      }
      .article {
        margin: 20px 0;
      }
      .article-title {
        font-weight: bold;
        text-align: center;
        margin: 15px 0 10px 0;
      }
      .signature-section {
        display: flex;
        justify-content: space-between;
        margin-top: 50px;
        padding-top: 20px;
      }
      .signature {
        text-align: center;
        width: 200px;
      }
      .signature-line {
        border-bottom: 1px solid #333;
        margin-bottom: 5px;
        height: 40px;
      }
      .print-button,
      .pdf-button,
      .word-button {
        position: fixed;
        right: 20px;
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 120px;
        justify-content: center;
      }

      .print-button {
        top: 20px;
        background-color: #007bff;
      }

      .pdf-button {
        top: 80px;
        background-color: #dc3545;
      }

      .word-button {
        top: 140px;
        background-color: #6f42c1;
      }

      .print-button:hover,
      .pdf-button:hover,
      .word-button:hover {
        opacity: 0.8;
      }

      @media print {
        .print-button,
        .pdf-button,
        .word-button {
          display: none !important;
        }
        body {
          background-color: white;
          padding: 0;
        }
        .container {
          box-shadow: none;
          padding: 20px;
        }

        /* Ukloni header i footer sa datumom i linkom */
        @page {
          margin: 0.5in;
          size: A4;
        }

        /* Sakrij default browser header/footer */
        html,
        body {
          -webkit-print-color-adjust: exact;
          print-color-adjust: exact;
        }
      }
    </style>
  </head>
  <body>
    <button class="print-button" onclick="window.print()">ğŸ–¨ï¸ Å tampaj</button>
    <button class="pdf-button" onclick="downloadPDF()">ğŸ“„ PDF</button>
    <button class="word-button" onclick="downloadWordCompact()">ğŸ“ Word</button>

    <div class="container">
      <p>
        Na osnovu Äl. 29, 30 taÄ.1 i 31. Zakona o radu (Â»Sl.list CGÂ«.br.74/2019,
        ... 68/21 u daljem tekstu: ZAKON), odredbi OpÅ¡teg kolektivnog ugovora
        (Â»Sl.list CGÂ« br. 150/2022), Äl.16. Zakon o zaÅ¡titi i zdravlju na radu
        (Â»Sl.list CGÂ« br.34/14 i 44/18), Äl.1. Pravilnika o pitanjima iz zaÅ¡tite
        na radu koja treba urediti ugovorom o radu (Â»Sl.list RCGÂ« br.67/05) i
        Äl.7 Zakona o zabrani zlostavljanja na radu (Â»Sl.list CGÂ«, br.30/12 i
        54/16) dana zakljuÄuje 01.07.2025 se sledeÄ‡i
      </p>

      <h1>
        UGOVOR O RADU<br />na <span id="tip-ugovora">odredjeno</span> vrijeme
      </h1>

      <p>
        <strong>POSLODAVAC:</strong>
        <span id="firma-naziv">MURIZ D.O.O.</span> PIB:
        <span id="firma-pib">02068974</span><br />
        adresa: <span id="firma-adresa">MILA BOSKOVICA</span> koga zastupa
        izvrÅ¡ni direktor <span id="direktor-ime">SPIÄŒANOVIÄ† VOJIN</span>
      </p>

      <p>
        <strong>ZAPOSLENI:</strong>
        <span id="radnik-ime-prezime">DEJAN NOVOVIÄ†</span> iz Bara jmbg:
        <span id="radnik-jmbg">0506981250010</span>, sa adresom stanovanja:
        <span id="radnik-adresa">Bar, Ulica 123</span>, <br />
      </p>
      <p>
        Ovim ugovorom se uredjuju odnosi po osnovu rada izmedju poslodavca i
        zaposlenog i utvrdjuju medjusobna prava, obaveze i odgovornosti u skladu
        sa odredbama Zakona o radu, OpÅ¡teg kolektivnog ugovora i akata
        poslodavca.
      </p>

      <div class="article">
        <div class="article-title">ÄŒlan 1.</div>
        <p>
          Zaposleni zasniva radni odnos na radnom mjestu
          <span id="pozicija-naziv">rukovalac graÄ‘evi</span> u prostorijama
          poslodavca.<br />
          U obavljanju poslova iz prethodnog stava zaposleni:
        </p>
        <div id="pozicija-opis">
          <p>
            - Upravljanje maÅ¡inama: Rukovalac upravlja razliÄitim graÄ‘evinskim
            maÅ¡inama kao Å¡to su bageri, buldoÅ¾eri, utovarivaÄi, rovokopaÄi,
            valjci, kranovi i druge specijalizovane maÅ¡ine.<br />
            -OdrÅ¾avanje maÅ¡ina: Redovno pregledanje, ÄiÅ¡Ä‡enje i osnovno
            odrÅ¾avanje maÅ¡ina kako bi se osiguralo da su u ispravnom stanju za
            rad. To ukljuÄuje proveru ulja, goriva, rashladne teÄnosti i drugih
            vaÅ¾nih komponenti.
          </p>
        </div>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 2.</div>
        <p>
          Radni odnos se zasniva na
          <span id="tip-ugovora-clan2">odreÄ‘eno</span> vrijeme za period od
          <span id="datum-zaposlenja-clan2">01.07.2025</span
          ><span id="do-datum-prestanka-wrapper">
            do <span id="datum-prestanka-clan2">31.12.2025</span></span
          >
          godine.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 3.</div>
        <p>
          Zaposleni stupa na rad dana
          <span id="datum-stupanja">01.07.2025</span> godine.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 4.</div>
        <p>
          Zaposlenom pripada mjeseÄna zarada u neto iznosu od
          <span id="visina-zarade">800,00</span> eura u skladu sa Äl.11 OpÅ¡teg
          kolektivnog ugovora (Sl. list CG 37/19). Minimalna zarada, u neto
          iznosu, ne moÅ¾e biti niÅ¾a od 600,00 eura, dok Vlada ne utvrdi
          drugaÄije.
        </p>
        <p>
          Zarada zaposlenog uveÄ‡ava se po Äasu za svaku zapocetu godinu radnog
          staÅ¾a i to:<br />
          - do 10 godina 0.5 %<br />
          - od 10-20 godina 0.75 %<br />
          - preko 20 godina 1 %
        </p>
        <p>
          Zarada zaposlenog uveÄ‡ava se po Äasu :<br />
          - 40% za rad noÄ‡u ( izmedju 22 sata i 6 sat narednog dana )<br />
          - 150% za rad na dane drzavnog ili vjerskog praznika<br />
          - 40 % za rad duzi od punog radnog vreinena ( prekovremeni rad )
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 5.</div>
        <p>
          Zaposlenom pripadaju i naknade zarada u skladu sa odredbama Opsteg
          kolektivnog ugovora i aktima poslodavca.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 6.</div>
        <p>
          Poslodavac je duzan da u rokovima utvrdjenim zakonom I opÅ¡tim
          kolektivnim ugovorom vrÅ¡i i isplatu zarada i naknada zarada zaposlenom
          iz Äl. 4 i 5 ovog ugovora do kraja mjeseca za predhodni mjesec.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 7.</div>
        <p>
          Radni odnos se zasniva na
          <span id="tip-ugovora-clan7">odredjeno</span> vrijeme za period od
          <span id="datum-pocetka">01.07.2025</span
          ><span id="datum-kraja-wrapper">
            do <span id="datum-kraja">31.12.2025</span></span
          ><br />
          adresa <span id="mesto-rada">SUSANJ BB</span>
        </p>
        <p>
          Zaposleni obavlja poslove iz tac. 1 u prostorijama poslodavca, sa
          <span id="tip-radnog-vremena">PUNIM</span> radnim vremenom od
          <span id="sati-dnevno">8</span> (<span id="sati-dnevno-tekst"
            >osam</span
          >) Äasova dnevno, odnosno <span id="sati-nedeljno">40</span> (<span
            id="sati-nedeljno-tekst"
            >Äetrdeset</span
          >) nedeljno
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 8.</div>
        <p>
          Zaposleni ima pravo na dnevni odmor u toku rada u trajanju od 30
          minuta, i jedan dan sedmiÄnog odmora koji Ä‡e koristiti nedjeljom odn.
          drugim danom po odluci izvrÅ¡nog direktora DruÅ¡tva.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 9.</div>
        <p>
          Zaposleni ima pravo na godisnji odmor u trajanju od po 2 radna dana za
          svaki mjesec rada. GodiÅ¡nji odmor se pored vremena iz prethodnog stava
          uveÄ‡ava prema duÅ¾ini radnog staÅ¾a:<br />
          - Od 5 do 15 godina â€“ 1 radni dan<br />
          - Od 15 do 25 godina â€“ 2 radna dana<br />
          - Od 25 do 35 godina â€“ 3 radna dana<br />
          - Preko 35 godina â€“ 5 radnih dana
        </p>
        <p>
          Zaposleni ima pravo na odsustvo sa rada ( plaÄ‡eno odn. neplaÄ‡eno) u
          skladu sa odredbama Zakona o radu, OpÅ¡teg kolektivnog ugovora i akata
          poslodavca.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 10</div>
        <p>
          Zaposleni je duÅ¾an da :<br />
          - savjesno i odgovorno obavlja poslove radnog mjesta ,<br />
          - poÅ¡tuje organizaciju rada i poslovanje kod poslodavca, kao i uslove
          i pravila poslodavca u vezi sa ispunjavanjem ugovorenih i drugih
          obaveza iz radnog odnosa,<br />
          - vodi raÄuna i savjesno se odnosi prema sredstvima rada i
          materijalnim sredstvima poslodavca,<br />
          - obavijesti poslodavca o situacijama koje po miÅ¡ljenju zaposlenog
          mogu da predstavljaju opasnost po Å¾ivot i zdravlje i sa kojima
          zaposleni ne moÅ¾e da se suoÄi na odgovarajuÄ‡i naÄin, ili o svakoj
          situaciji za koju zaposleni ima objektivnih razloga da smatra da
          predstavlja neposrednu i ozbiljnu opasnost za njegov Å¾ivot ili
          zdravlje,<br />
          - u roku od 3 dana od dana promjene adrese stanovanja o tome
          obavijesti poslodavca,<br />
          - poÅ¡tuje propise o ZaÅ¡titi i zdravlju na radu i paÅ¾ljivo obavlja
          posao na naÄin da Å¡titi svoj Å¾ivot i zdravlje , kao i Å¾ivot i zdravlje
          drugih lica,<br />
          - postupa u skladu sa drugim obavezama utvrÄ‘enim zakonom, kolektivnim
          ugovorom, aktima poslodavca I ugovorom o radu<br />
          - najkasnije u roku od 3 dana od dana nastupanja privremene
          sprijeÄenosti za rad, liÄno ili preko drugog lica dostavi potvrdu
          doktora medicine.<br />
          - Da izvjeÅ¡taj o privremenoj spreÄenosti za rad dostavi u roku od 5
          dana od dana izdavanja
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 11</div>
        <p>
          Poslodavac je duÅ¾an da prijavi zaposlenog na obavezno socijalno
          osiguranje i blagovremeno uplaÄ‡uje doprinos za penzjsko, invalidsko i
          zdravstveno osiguranje i osiguranje za sluÄaj nezaposlenosti.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 12</div>
        <p>
          Za vrijeme trajanja radnog odnosa zaposleni moÅ¾e biti rasporeÄ‘en na
          svako radno mjesto koje odgovara njegovoj struÄnoj spremi, znanju i
          sposobnostima, ukoliko to zahtijevaju potrebe procesa i organizacije
          rada.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 13</div>
        <p>
          Zaposleni moÅ¾e biti privremeno rasporeÄ‘en na radno mjesto Äije
          obavljanje zahtijeva niÅ¾i stepen struÄne spreme od one koju ima, bez
          njegove saglasnosti, ukoliko to zahtijevaju potrebe procesa i
          organizacije rada , ali najduÅ¾e do 30 dana.
        </p>
        <p>
          U sluÄaju iz predhodnog stava zaposlenom pripada zarada koju je imao
          na radnom mjestu na kome je do tada radio, ako je za njega to
          povoljnije
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 14</div>
        <p>
          Zaposleni se moÅ¾e rasporediti na rad u drugo mjesto rada kod ovog
          poslodavca, u sluÄaju potrebe procesa i organizacije rada, u skladu sa
          odredbama Äl. 50 Zakona o radu.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 15</div>
        <p>
          Zaposleni se moÅ¾e rasporediti na rad u drugo mjesto rada kod ovog
          poslodavca, u sluÄaju potrebe procesa i organizacije rada, u skladu sa
          odredbama Äl. 50 Zakona o radu.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 16</div>
        <p>
          Poslodavac je duÅ¾an da zaposlenom obezbijedi sredstva i mjere zaÅ¡tite
          na radu u skladu sa odredbama Zakona o zaÅ¡titi i zdravlju na radu (
          SI. List CG 34/14) i Akta o zaÅ¡titi na radu poslodavca.
        </p>
        <p>
          Zaposleni je duÅ¾an da se prilikom zakljuÄenja ovog ugovora o radu
          upozna sa mjerama i sredstvima zaÅ¡tite na radu, te da se u radu strogo
          pridrÅ¾ava propisanih mjera .
        </p>
        <p>
          NepoÅ¡tovanje utvrÄ‘enih propisa i mjera iz oblasti zaÅ¡tite na radu
          predstavlja teÅ¾u povredu radne discipline zbog koje se izriÄe mjera
          prestanak radnog odnosa.
        </p>
        <p>
          Prava, obaveze i odgovomosti zaposlenog i poslodavca koje se odnose na
          zaÅ¡titu i zdravlje na radu uredjuju se aneksom ugovora odn. posebnim
          aktom poslodavca.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 17</div>
        <p>
          Zaposleni je duÅ¾an da poslove radnog mjesta obavlja savjesno i
          odgovorno skladu sa aktima poslodavca, zahjevima radnog mjesta i
          nalozima rukovodioca procesa rada
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 18</div>
        <p>
          Zaposlenom prestaje radni odnos u sluÄajevima, na naÄin i pod uslovima
          utvrÄ‘enim Zakonom, Kolektivnim ugovorom i aktima poslodavca.
        </p>
        <p>
          Ovaj Ugovor o radu raskida se zbog sledeÄ‡ih povreda radnih obaveza:<br />
          - neizvrÅ¡avanjem radnih i drugih obaveza,<br />
          - nesavjesno izvrÅ¡avanje radnih i drugih obaveza,<br />
          - neblagovremeno i nemarno izvrÅ¡avanje radnih obaveza,<br />
          - pronevjera ili kraÄ‘a imovine preduzeÄ‡a,<br />
          - nezakonito raspolaganje sredstvima preduzeÄ‡a,<br />
          - neostvarenje predvidenih rezultata rada iz neopravdanih razloga,<br />
          - povreda propisa o zaÅ¡titi poÅ¾ara, eksplozije, elementarnih nepogoda
          i Å¡tetnih djelovanja otrovnih i drugih Å¡tetnih materija, kao i povreda
          propisa i nepreduzimanje mjera radi zaÅ¡tite zaposlenih, sredstava rada
          i Å¾ivotne sredine,<br />
          - zloupotreba poloÅ¾aja i prekoraÄenja datih ovlaÅ¡Ä‡enja,<br />
          - odavanje poslovne i druge tajne,<br />
          - zloupotreba prava koriÅ¡Ä‡enja bolovanja,<br />
          - ometanje jednog ili viÅ¡e zaposlenih u procesu rada kojim se oteÅ¾ava
          izvrÅ¡enje radnih obaveza,<br />
          - odbijanje zaposlenog da obavlja poslove radnog mjesta na koje je
          trajno - privremeno rasporeÄ‘en,<br />
          - falsifikovanje novÄanih i drugih dokumenata,<br />
          - povreda radne obaveze koja predstavlja kriviÄno djelo,<br />
          - dolazak na rad u napitom stanju ili upotreba alkohola i drugih
          narkotiÄkih sredstava u toku rada,<br />
          - neopravdano napuÅ¡tanje radnog mjesta prije zavrÅ¡etka radnog
          vremena,<br />
          - neuredno drÅ¾anje dokumenata i sredstava rada,<br />
          - nedovoljno preduzimanje mjera zaÅ¡tite na radu ili zaÅ¡tite radnika na
          rad ili zaÅ¡tite imovine preduzeÄ‡a,<br />
          - prouzrokovanje materijalne Å¡tete usled krajnje nepaÅ¾nje ili
          namjere,<br />
          - pokuÅ¡aj kraÄ‘e, posticaj na kraÄ‘u ili sauÄesniÅ¡tvo u kraÄ‘i imovine u
          preduzeÄ‡u,<br />
          - neopravdano izostajanje sa rada 5 radnih dana.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 19</div>
        <p>
          Zaposlenom prestaje radni odnos istekom roka iz taÄke 2. ovog ugovora
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 20</div>
        <p>
          Ovaj ugovor se moÅ¾e raskinuti i prije isteka roka iz taÄke 2.
          sporazumom poslodavca i zaposlenog, kojim Ä‡e se utvrdit rokovi i
          uslovi prestanka radnog odnosa.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 21</div>
        <p>
          Zaposleni moÅ¾e otkazati ovaj ugovor o radu u pisanoj formi , ist mora
          biti ovjeren kod strane notara, suda ili organa lokalne uprave, i
          dostavljen poslodavcu u pisanoj formi najmanje 30 dana prije dana
          prestanka radnog odnosa, osim ako se poslodavca i zaposleni drugaÄije
          ne dogovore
        </p>
        <p>
          U sluÄaju da zaposleni ne ispoÅ¡tuje otkazni rok poslodavac ima pravo
          na naknadu Å¡tete , u skladu sa odredbama Zakona o radu.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 22</div>
        <p>
          Za slucaj otkazivanja ovog ugovora o radu ugovara se otkazni rok od 30
          dana.<br />
          Na sva pitanja vezana za otkazni rok neposredno se primjenjuju odredbe
          Äl. 177 Zakona o radu
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 23</div>
        <p>
          Ukoliko zaposleni umiÅ¡ljajem ili iz nehata povrijedi radnu obavezu ili
          se ne pridrzava odluke koju je donio poslodavac, odgovara za uÄinjenu
          povredu radne obaveze.
        </p>
        <p>
          Vrste povreda radnih obaveza, mjere za povrede radnih obaveza i
          postupak utvrdjivanja odgovornosti uredjuju se aktom o dispciplinskoj
          odgovomosti poslodavca, u skladu sa odredbama Zakona o radu.
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 24</div>
        <p>
          Na sve Å¡to nije predviÄ‘eno ovim ugovorom neposredno Ä‡e se
          primjenjivati odredbe Zakona i opÅ¡teg kolektivnog ugovora
        </p>
      </div>

      <div class="article">
        <div class="article-title">ÄŒlan 25</div>
        <p>
          Ovaj ugovor se smatra zakljuÄenim kada ga potpiÅ¡u poslodavac i
          zaposleni.
        </p>
      </div>

      <div class="signature-section">
        <div class="signature">
          <div class="signature-line"></div>
          <p><strong>POSLODAVAC</strong></p>
        </div>
        <div class="signature">
          <div class="signature-line"></div>
          <p><strong>ZAPOSLENI</strong></p>
        </div>
      </div>
    </div>

    <script>
      async function popuniUgovor(ugovorId) {
        try {
          const response = await fetch(`/api/contracts/${ugovorId}`);
          const ugovor = await response.json();

          // Koristi novu centralizovanu funkciju za popunjavanje
          popuniUgovorSaPodacima(ugovor);
        } catch (error) {
          console.error('GreÅ¡ka pri dohvaÄ‡anju ugovora:', error);
        }
      }

      async function popuniUgovorPoRadniku(radnikId, firmaId) {
        try {
          // UÄitaj podatke o radniku i firmi direktno
          const [radnikResponse, firmaResponse] = await Promise.all([
            fetch(`/api/radnici/id/${radnikId}`),
            fetch(`/api/firme/id/${firmaId}`),
          ]);

          const radnik = await radnikResponse.json();
          const firma = await firmaResponse.json();

          // Kreiraj ugovor objekat u istom formatu kao Å¡to API vraÄ‡a
          const ugovor = {
            radnik_tip_ugovora: radnik.tip_ugovora,
            firma_naziv: firma.naziv,
            firma_pib: firma.pib,
            firma_adresa: firma.adresa,
            direktor_ime_prezime: firma.direktor_ime_prezime,
            radnik_ime: radnik.ime,
            radnik_prezime: radnik.prezime,
            radnik_jmbg: radnik.jmbg,
            radnik_grad: radnik.grad,
            radnik_adresa: radnik.adresa,
            pozicija_naziv: radnik.pozicija_naziv,
            opis_poslova: radnik.opis_poslova,
            datum_zaposlenja: radnik.datum_zaposlenja,
            datum_prestanka: radnik.datum_prestanka,
            visina_zarade: radnik.visina_zarade,
            tip_radnog_vremena: radnik.tip_radnog_vremena,
          };

          // Pozovi postojeÄ‡u logiku popunjavanja sa kreiranim objektom
          popuniUgovorSaPodacima(ugovor);
        } catch (error) {
          console.error('GreÅ¡ka pri dohvaÄ‡anju podataka za ugovor:', error);
        }
      }

      // Funkcija za transformaciju grada u genitiv (iz + grad)
      function transformisiGradUPadez(grad) {
        if (!grad) return 'Bara'; // Default vrednost

        // Ukloni razmake i pretvori u lowercase za poreÄ‘enje
        const gradLower = grad.trim().toLowerCase();

        // Mapa najÄeÅ¡Ä‡ih gradova sa njihovim padeÅ¾nim oblicima
        const gradoviPadezi = {
          bar: 'Bara',
          budva: 'Budve',
          podgorica: 'Podgorice',
          nikÅ¡iÄ‡: 'NikÅ¡iÄ‡a',
          niksic: 'NikÅ¡iÄ‡a',
          'herceg novi': 'Herceg Novog',
          cetinje: 'Cetinja',
          ulcinj: 'Ulcinja',
          kotor: 'Kotora',
          tivat: 'Tivta',
          pljevlja: 'Pljevalja',
          'bijelo polje': 'Bijelog Polja',
          berane: 'Berana',
          andrijevica: 'Andrijevice',
          danilovgrad: 'Danilovgrada',
          kolaÅ¡in: 'KolaÅ¡ina',
          kolasin: 'KolaÅ¡ina',
          mojkovac: 'Mojkovca',
          plav: 'Plava',
          roÅ¾aje: 'RoÅ¾aja',
          rozaje: 'RoÅ¾aja',
          Å¡avnik: 'Å avnika',
          savnik: 'Å avnika',
          Å¾abljak: 'Å½abljaka',
          zabljak: 'Å½abljaka',
          petnjica: 'Petnjice',
          gusinje: 'Gusinja',
          tuzi: 'Tuzija',
        };

        // Provjeri da li grad postoji u mapi
        if (gradoviPadezi[gradLower]) {
          return gradoviPadezi[gradLower];
        }

        // Osnovna pravila za nepoznate gradove
        const gradOriginal = grad.trim();

        // Gradovi koji se zavrÅ¡avaju na -a (Å¾enski rod)
        if (gradOriginal.endsWith('a')) {
          return gradOriginal.slice(0, -1) + 'e';
        }

        // Gradovi koji se zavrÅ¡avaju na -o (srednji rod)
        if (gradOriginal.endsWith('o')) {
          return gradOriginal.slice(0, -1) + 'a';
        }

        // Gradovi koji se zavrÅ¡avaju na suglasnik (muÅ¡ki rod)
        // Dodaj -a na kraj
        return gradOriginal + 'a';
      }

      function popuniUgovorSaPodacima(ugovor) {
        // Popuni tip ugovora
        const tipTekst =
          ugovor.radnik_tip_ugovora === 'na_neodredjeno'
            ? 'neodreÄ‘eno'
            : 'odreÄ‘eno';
        document.getElementById('tip-ugovora').textContent = tipTekst;
        document.getElementById('tip-ugovora-clan7').textContent = tipTekst;
        document.getElementById('tip-ugovora-clan2').textContent = tipTekst;

        // Popuni podatke o firmi
        document.getElementById('firma-naziv').textContent = ugovor.firma_naziv;
        document.getElementById('firma-pib').textContent = ugovor.firma_pib;
        document.getElementById('firma-adresa').textContent =
          ugovor.firma_adresa || 'MILA BOSKOVICA';
        document.getElementById('direktor-ime').textContent =
          ugovor.direktor_ime_prezime || 'SPIÄŒANOVIÄ† VOJIN';

        // Popuni podatke o radniku
        const radnikImePrezime = `${ugovor.radnik_prezime} ${ugovor.radnik_ime}`;
        document.getElementById('radnik-ime-prezime').textContent =
          radnikImePrezime.toUpperCase();
        document.getElementById('radnik-jmbg').textContent = ugovor.radnik_jmbg;

        // TransformiÅ¡i grad u odgovarajuÄ‡i padeÅ¾
        const gradUPadeÅ¾u = transformisiGradUPadez(ugovor.radnik_grad);
        document.getElementById('radnik-adresa').textContent = gradUPadeÅ¾u;

        // Popuni datume
        const datumZaposlenja = new Date(ugovor.datum_zaposlenja);
        const formatiraniDatumZaposlenja =
          datumZaposlenja.toLocaleDateString('sr-Latn-RS');

        document.getElementById('datum-pocetka').textContent =
          formatiraniDatumZaposlenja;
        document.getElementById('datum-stupanja').textContent =
          formatiraniDatumZaposlenja;
        document.getElementById('datum-zaposlenja-clan2').textContent =
          formatiraniDatumZaposlenja;

        // PrikaÅ¾i/sakrij datum kraja za odreÄ‘eno/neodreÄ‘eno vreme
        const datumKrajaWrapper = document.getElementById(
          'datum-kraja-wrapper'
        );
        const doDatumPrestankaWrapper = document.getElementById(
          'do-datum-prestanka-wrapper'
        );

        if (ugovor.radnik_tip_ugovora === 'na_neodredjeno') {
          datumKrajaWrapper.style.display = 'none';
          doDatumPrestankaWrapper.style.display = 'none';
        } else if (ugovor.datum_prestanka) {
          const datumPrestanka = new Date(ugovor.datum_prestanka);
          const formatiraniDatumPrestanka =
            datumPrestanka.toLocaleDateString('sr-Latn-RS');
          document.getElementById('datum-kraja').textContent =
            formatiraniDatumPrestanka;
          document.getElementById('datum-prestanka-clan2').textContent =
            formatiraniDatumPrestanka;
          datumKrajaWrapper.style.display = 'inline';
          doDatumPrestankaWrapper.style.display = 'inline';
        }

        // Popuni mesto rada
        document.getElementById('mesto-rada').textContent =
          ugovor.mesto_rada || 'SUSANJ BB';

        // Popuni poziciju
        document.getElementById('pozicija-naziv').textContent =
          ugovor.pozicija_naziv || 'rukovalac graÄ‘evi';

        // Popuni opis pozicije
        const pozicijaOpisDiv = document.getElementById('pozicija-opis');
        if (ugovor.opis_poslova) {
          pozicijaOpisDiv.innerHTML = `<p>${ugovor.opis_poslova}</p>`;
          console.log('Popunjen opis pozicije iz baze:', ugovor.opis_poslova);
        } else {
        }

        // Popuni radno vreme na osnovu tip_radnog_vremena iz baze
        let satiDnevno = 8;
        let satiNedeljno = 40;

        if (ugovor.tip_radnog_vremena) {
          switch (ugovor.tip_radnog_vremena) {
            case 'puno_8h':
              satiDnevno = 8;
              satiNedeljno = 40;
              break;
            case 'skraceno_6h':
              satiDnevno = 6;
              satiNedeljno = 30;
              break;
            case 'skraceno_4h':
              satiDnevno = 4;
              satiNedeljno = 20;
              break;
            case 'skraceno_2h':
              satiDnevno = 2;
              satiNedeljno = 10;
              break;
            default:
              satiDnevno = 8;
              satiNedeljno = 40;
          }
        }

        // Funkcija za konvertovanje broja u tekst
        const brojUTekst = broj => {
          const brojevi = {
            2: 'dva',
            4: 'Äetiri',
            6: 'Å¡est',
            8: 'osam',
            10: 'deset',
            20: 'dvadeset',
            30: 'trideset',
            40: 'Äetrdeset',
          };
          return brojevi[broj] || broj.toString();
        };

        // OdreÄ‘uj tip radnog vremena
        let tipRadnogVremena = 'PUNIM';
        if (satiDnevno < 8) {
          tipRadnogVremena = 'SKRAÄ†ENIM';
        }

        document.getElementById('tip-radnog-vremena').textContent =
          tipRadnogVremena;
        document.getElementById('sati-dnevno').textContent = satiDnevno;
        document.getElementById('sati-dnevno-tekst').textContent =
          brojUTekst(satiDnevno);
        document.getElementById('sati-nedeljno').textContent = satiNedeljno;
        document.getElementById('sati-nedeljno-tekst').textContent =
          brojUTekst(satiNedeljno);

        // Popuni visinu zarade
        if (ugovor.visina_zarade) {
          const formatiranZarada = parseFloat(
            ugovor.visina_zarade
          ).toLocaleString('sr-Latn-RS', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          });
          document.getElementById('visina-zarade').textContent =
            formatiranZarada;
        }

        console.log('Ugovor uspeÅ¡no popunjen:', ugovor);
      }

      // Kada se stranica uÄita, popuni ugovor
      document.addEventListener('DOMContentLoaded', function () {
        // Dobij ugovorId ili radnikId iz URL parametara
        const urlParams = new URLSearchParams(window.location.search);
        const ugovorId = urlParams.get('ugovor');
        const radnikId = urlParams.get('radnikId');
        const firmaId = urlParams.get('firmaId');

        // Popuni ugovor kada se stranica uÄita
        if (ugovorId) {
          // PostojeÄ‡i naÄin - preko ugovor ID-a
          popuniUgovor(ugovorId);
        } else if (radnikId && firmaId) {
          // Novi naÄin - direktno preko radnik i firma ID-a
          popuniUgovorPoRadniku(radnikId, firmaId);
        } else {
          // Fallback
          popuniUgovor(1);
        }
      });

      // ============================================
      // EXPORT FUNKCIJE - koristi ExportUtils modul
      // ============================================

      async function downloadPDF() {
        await ExportUtils.exportToPDF({
          containerSelector: '.container',
          filePrefix: 'Ugovor',
          getFileName: () => {
            const radnikIme =
              document.getElementById('radnik-ime-prezime')?.textContent ||
              'Radnik';
            const firmaNaziv =
              document.getElementById('firma-naziv')?.textContent || 'Firma';
            return `Ugovor_${radnikIme.replace(
              /\s+/g,
              '_'
            )}_${firmaNaziv.replace(/\s+/g, '_')}.pdf`;
          },
        });
      }

      function downloadWordCompact() {
        ExportUtils.exportToWord({
          containerSelector: '.container',
          filePrefix: 'Ugovor',
          compact: true,
          getFileName: () => {
            const radnikIme =
              document.getElementById('radnik-ime-prezime')?.textContent ||
              'Radnik';
            const firmaNaziv =
              document.getElementById('firma-naziv')?.textContent || 'Firma';
            return `Ugovor_Kompakt_${radnikIme.replace(
              /\s+/g,
              '_'
            )}_${firmaNaziv.replace(/\s+/g, '_')}.doc`;
          },
        });
      }
    </script>
  </body>
</html>
